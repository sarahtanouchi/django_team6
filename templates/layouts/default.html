<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'stylesheets/reset.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="{% static 'stylesheets/styles.css' %}">
    {% block additional_css %}{% endblock %}
    
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.slim.min.js" integrity="sha512-/DXTXr6nQodMUiq+IUJYCt2PPOUjrHJ9wFrqpJ3XkgPNOZVfMok7cRw6CSxyCQxXn6ozlESsSh1/sMCTF1rL/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js" integrity="sha512-ubuT8Z88WxezgSqf3RLuNi5lmjstiJcyezx34yIU2gAHonIi27Na7atqzUZCOoY4CExaoFumzOsFQ2Ch+I/HCw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.5.3/js/bootstrap.min.js" integrity="sha512-8qmis31OQi6hIRgvkht0s6mCOittjMa9GMqtK9hes5iEQBQE/Ca6yGE5FsW36vyipGoWQswBj/QBm2JR086Rkw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>    
    
    <div class="container-fluid">
        {% include 'includes/normal_header.html' %}
    </div>
    <div class="container">
        {% block content %}{% endblock %}
    </div>
    <div class="container-fluid">
        {% include 'includes/footer.html' %}
    </div>
    {% include 'includes/modal.html' %}
    
    <script>
        function logoutAndShowModal() {
            // ログアウト処理
            window.location.href = "{% url 'accounts:logout' %}";

            // ログアウト完了モーダルを表示
            // $('#logoutModal').modal('show');
        }

        // ログイン状態をJavaScriptに渡す
        var isAuthenticated = {% if user.is_authenticated %}true{% else %}false{% endif %};
        
        function showLoginModal() {
            // ログインしていない場合はモーダルを表示
            if (!isAuthenticated) {
                $('#loginModal').modal('show');
                return false;  // リンクをクリックしてもページ遷移をしない
            }
            return true;  // ログインしている場合は通常の動作を続行
        }
    </script>
</body>
</html>