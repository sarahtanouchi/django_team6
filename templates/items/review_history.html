{% extends "layouts/default.html" %}
{% load static %}
{% load humanize %}
 
{% block title %}{{ title }}{% endblock %}

{% block additional_css %}
    <link rel="stylesheet" href="{% static 'stylesheets/review.css' %}">
{% endblock %} 

{% block content %}
<main class="contents">
    <h1>{{ title }}</h1>
    <div class="row ml-4">
        <div class="col-12">
        {% for review in reviews %}
            <div class="card item">
                <div class="row item_row">
                    {% with review.item.item_images.all.0 as first_image %}
                    <figure class="col-3 item_figure">
                        <a href="">
               			    <img class="img-fluid auto" src="{{ first_image.image.url }}">
               			</a>
            	        <div class="item_tag_row">
		    				<span class="item_tag">
		    					{% if review.item.taste %}
	    							{{ review.item.tea_type }}
		    					{% else %}
		    						{{ review.item.item_type }}
		    					{% endif %}
		    				</span>
		    				<span class="item_tag">
		    					{% if review.item.taste %}
    								{{ review.item.taste }}
	    						{% else %}
	    							{{ review.item.occasion }}
	    						{% endif %}	
		    				</span>
		    			</div>
            	        
            	        <figcaption>
    	    				<div class="review_item_name">
    	    					<a href="">
    		    					<span>{{ review.item.name }}</span>
    		    				</a>
    		    				<span>　{{ review.item.price | intcomma }}円(税込)</span>
    		    			</div>
    	    			</figcaption>
	    			</figure>
    	    		{% endwith %}
                    <ul class="col-9">   
                        <li class="item_review">
                            <p>評価:
                                {% if review.rate == 5 %}
                                    <span class="fas fa-star"></span>
                                    <span class="fas fa-star"></span>
                                    <span class="fas fa-star"></span>
                                    <span class="fas fa-star"></span>
                                    <span class="fas fa-star"></span>
                                {% elif review.rate == 4 %}
                                    <span class="fas fa-star"></span>
                                    <span class="fas fa-star"></span>
                                    <span class="fas fa-star"></span>
                                    <span class="fas fa-star"></span>
                                    <span class="far fa-star"></span>
                                {% elif review.rate == 3 %}
                                    <span class="fas fa-star"></span>
                                    <span class="fas fa-star"></span>
                                    <span class="fas fa-star"></span>
                                    <span class="far fa-star"></span>
                                    <span class="far fa-star"></span>
                                {% elif review.rate == 2 %}
                                    <span class="fas fa-star"></span>
                                    <span class="fas fa-star"></span>
                                    <span class="far fa-star"></span>
                                    <span class="far fa-star"></span>
                                    <span class="far fa-star"></span>
                                {% elif review.rate == 1 %}
                                    <span class="fas fa-star"></span>
                                    <span class="far fa-star"></span>
                                    <span class="far fa-star"></span>
                                    <span class="far fa-star"></span>
                                    <span class="far fa-star"></span>
                                {% endif %}
                            </p>
                            <p>コメント: {{ review.comment }}</p>
                            <p>投稿日時：{{ review.create_date }}</p>
                        </li>
                    </ul>
                </div>
            	<form method="POST" action="{% url 'items:review_delete' review.id %}" class="ml-auto">
				    {% csrf_token %}
                    <input type="submit" value="投稿を削除" >
                </form>
            </div>
        {% empty %}
            <p class="text-center mt-5 mb-3">レビュー投稿はありません</p>
        {% endfor %}
        </div>
    </div>
  
    <div class="return_link d-flex justify-content-center">
        <button class="btn" onclick="window.history.back();return false;">＜ 戻る</button>
    </div>
</main>    
{% endblock %}