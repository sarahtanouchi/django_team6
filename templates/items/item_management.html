{% extends "layouts/default_minimum.html" %}
 
{% block title %}{{ title }}{% endblock %}
 
{% block content %}
	 <div class="d-flex justify-content-md-between">
        <h1 class="m-0">{{ title }}</h1>
        <a class="btn btn-secondary btn-sm mb-1" href="{% url 'items:create' %}">新規追加</a>
    </div>

	<table class="item_table">
		<thead>
			<tr>
				<th>名前</th>
				<th>価格</th>
				<th>公開フラグ</th>
				<th>おすすめ</th>
				<th>在庫数</th>
				<th>詳細情報</th>
				<th>商品タイプ</th>
				<th>利用場面</th>
				<th>お茶タイプ</th>
				<th>テイスト</th>
				<th>生産地</th>
				<th>画像</th>
				<th>操作</th>
			</tr>
		</thead>
		<tbody>
		    {% for item in item_list %}
			<tr>
				<td>{{ item.name }}</td>
				<td>{{ item.price }}</td>
				<td>{{ item.status }}</td>
				<td>{{ item.recommended }}</td>
				<td>{{ item.stock }}</td>
				<td>{{ item.description }}</td>
				<td>{{ item.item_type }}</td>
				<td>{{ item.occasion }}</td>
				<td>{{ item.tea_type }}</td>
				<td>{{ item.taste }}</td>
				<td>{{ item.area }}</td>
				<td>
				    {% if item.item_images %}
				    	{% for image in item.item_images.all %}
				    		<p>{{image.name}}</p>
				    		<div id="gallery">
	                        	<img class="img-fluid" src="{{ image.image.url }}">
                        	</div>
                        {% endfor %}
                    {% else %}
                        <img src="images/no_image.png">
                    {% endif %}
				</td>
				<td>
					<form method="POST" action="{% url 'items:delete' item.pk %}">
					    {% csrf_token %}
					    <a class="btn btn-secondary btn-sm mb-1" href="{% url 'items:update' item.pk %}">
	                      編集
	                    </a>
                        <button class="btn-white btn-sm mb-1" type="submit">削除</button>
                    </form>
				</td>
			</tr>
			{% empty %}
                <p>商品はありません。</p>
			{% endfor %}
		</tbody>
	</table>
	{% include "includes/pagination.html" %}
    <div class="return_link d-flex justify-content-center mt-3">
    	<button class="btn" onclick="window.history.back();return false;">＜ 戻る</button>
    </div>
{% endblock %}